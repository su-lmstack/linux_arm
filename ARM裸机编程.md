### ARM裸机编程相关知识
## 软件工具
- IDE: ADS和AXD，其中ADS集成了code warrior作为开发环境，AXD为在线调试界面。
- JLINK: 裸机刷程序以及调试都需要该工具。
## ARM 指令操作
- ARM 微处理器可工作在 ARM 状态和Thumb状态。
  - ARM状态时处理器执行32位的字对齐的ARM指令。
  - Thumb状态时，执行16位的半字对齐的Thumb指令。
  - 两种状态可以在线相互转换。
## 存储器格式
- 32位处理器
   - 32位指的时处理器一个指令可以处理32位的数据，指CPU内部寄存器的位数。
- 大端存储格式
   - 高字节存储在低地址
   - 低字节存储在高地址
- 小端存储格式
   - 低地址存放低字节
   - 高地址存放高字节
- 工作模式
   - 用户模式
      - 用于正常执行程序
   - 快速中断模式
      - 用于高速数据传输
   - 外部中断模式
      - 用于处理通常的终端
   - 管理模式
      - 操作系统使用的保护模式
   - 数据访问终止模式
      - 当数据或指令预取终止时进入该模式，可用于虚拟存储及存储保护
   - 系统模式
      - 运行具有特权的操作系统任务
   - 未定义指令中止模式
      - 当未定义的指令执行时进入该模式，可用于支持硬件。
   - 不同工作模式切换方式
      - 通过软件配置寄存器进行更换
      - 通过外部中断或异常处理进行更换，此种更换模式是在系统运行程序时更改。
## 寄存器
- 寄存器分类
   - ARM 有 31个通用寄存器和6个状态寄存器，每个寄存器为32位。
   - 在不同模式下可访问的寄存器种类不同。
- 寄存器对应
   - R0-R7 不分组寄存器（不同工作模式下通用）
   - R8-R14 分组寄存器（不同工作模式下不通用）
   - R15 程序计数器（PC指针）
   - R13 寄存器通常用作堆栈指针SP
   - R14 通常用作子程序链接寄存器LR（Link Register）， 指向函数的返回地址。
## 寻址方式
- 立即寻址
   - 也叫立即数寻址，操作数本身就在指令中给出。 立即数前要加#、&或0x
- 寄存器寻址
   - 利用寄存器中的数值作为操作数v
- 寄存器间接寻址
   - 以寄存器中的值作为操作数的地址，而操作数本身存放在存储器中。用[]表示该寻址为寄存器间接寻址。
- 基址变址寻址
   - 寄存器存放的是操作数的基地址，基地址需要加上偏移量，才能得到操作数的有效地址。 [, #5]
- 相对寻址
   - 以程序计数器PC的当前值为基址， 指令中的地址标号为偏移量，两者相加后得到操作数的有效地址。
- 堆栈
   - 递增堆栈：向高地址方向生长
   - 递减堆栈：向低地址方向生长
   - 满堆栈：堆栈指针指向最后压入堆栈的有效数据项
   - 空堆栈：堆栈指针指向下一个要放入数据的空位置
